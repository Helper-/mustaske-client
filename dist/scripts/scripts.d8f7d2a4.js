!function(){"use strict";angular.module("mustaskeClientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial","ngMessages","googlechart","btford.socket-io"])}(),function(){"use strict";function a(a){console.log("Routing was initialized"),a.otherwise({redirectTo:"/recent-questions"}),a.when("/recent-questions",{templateUrl:"views/recent-questions.view.html",controller:"RecentQuestionsController",controllerAs:"ctrl"}).when("/top-questions",{templateUrl:"views/top-questions.view.html",controller:"TopQuestionsController",controllerAs:"ctrl"}).when("/polls",{templateUrl:"views/polls.view.html",controller:"AboutController",controllerAs:"ctrl"}).when("/settings",{templateUrl:"views/settings.view.html",controller:"SettingsController",controllerAs:"ctrl"})}var b=angular.module("mustaskeClientApp");b.config(["$routeProvider",a])}(),function(){"use strict";function a(a,f){d=a,e=f,c(),b()}function b(){e.fontSet("fa","fontawesome")}function c(){d.definePalette("mustaskePrimary",{50:"#bad9ee",100:"#7db8de",200:"#519fd3",300:"#2c7bb0",400:"#266a97",500:"#20597f",600:"#1a4867",700:"#14374e",800:"#0e2636",900:"#07141d",A100:"#bad9ee",A200:"#7db8de",A400:"#266a97",A700:"#14374e",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100 A200"});var a={50:"#ffffff",100:"#f9f9f9",200:"#ececec",300:"#dfdfdf",400:"#d3d3d3",500:"#C6C6C6",600:"#b9b9b9",700:"#acacac",800:"#a0a0a0",900:"#939393",A100:"#ffffff",A200:"#ffffff",A400:"#ffffff",A700:"#868686"};d.definePalette("mustaskeAccent",a),d.theme("default").primaryPalette("mustaskePrimary").accentPalette("mustaskeAccent")}angular.module("mustaskeClientApp").config(["$mdThemingProvider","$mdIconProvider",a]);var d,e}(),function(){"use strict";angular.module("mustaskeClientApp").directive("loginOverlay",function(){return{templateUrl:"views/login-overlay.tpl.html",restrict:"E",controller:"OverlayController",controllerAs:"ctrl"}})}(),function(){"use strict";function a(a,f,g){return c=a,d=f,e=g,{templateUrl:"views/question-card.tpl.html",restrict:"E",scope:{question:"="},link:b}}function b(a){a.hide=!0;var b={isUpVoted:!0};a.voteControls=b,a.detailToggle=function(){c.debug(a.hide),a.hide=!a.hide},a.upVote=function(a){a.hasVotedUp?a.hasVotedUp=!1:(a.hasVotedUp=!0,a.hasVotedDown&&(a.hasVotedDown=!1)),e.upVoteQuestion(a.question_id)},a.downVote=function(a){a.hasVotedDown?a.hasVotedDown=!1:(a.hasVotedDown=!0,a.hasVotedUp&&(a.hasVotedUp=!1)),e.downVoteQuestion(a.question_id)},a.isRoomOwner=d.isRoomOwner()}angular.module("mustaskeClientApp").directive("questionCard",["$log","UserService","SocketService",a]);var c,d,e}(),function(){"use strict";function a(a,e){return d=a,c=e,{templateUrl:"views/question-input-fab.tpl.html",restrict:"E",scope:{},link:b}}function b(a){a.openOpenBottomSheet=function(){c.show({templateUrl:"views/question-input-bottom-sheet.tpl.html",controller:"QuestionInputController",controllerAs:"ctrl",clickOutsideToClose:!1}).then(function(a){d.debug(a)})}}angular.module("mustaskeClientApp").directive("questionInputFab",["$log","$mdBottomSheet",a]);var c,d}(),function(){"use strict";function a(){return{templateUrl:"views/topbar.tpl.html",restrict:"E"}}angular.module("mustaskeClientApp").directive("topbar",[a])}(),function(){"use strict";function a(a){return c=a,{templateUrl:"views/clicker-input-button.tpl.html",restrict:"E",scope:{},link:b}}function b(a){a.openOpenBottomSheet=function(){c.show({templateUrl:"views/clicker-input-bottom-sheet.tpl.html",controller:"ClickerInputController",controllerAs:"ctrl",clickOutsideToClose:!1})}}angular.module("mustaskeClientApp").directive("clickerInput",["$mdBottomSheet",a]);var c}(),function(){"use strict";function a(a,b,h,i){e=a,d=h,f=b,g=i,c=this,c.events={JOIN_ROOM:"join room",CREATE_ROOM:"create room",NEW_QUESTION:"new question",UP_VOTE_QUESTION:"upvote question",DOWN_VOTE_QUESTION:"downvote question"}}function b(a){var b=f.defer();return d.on(a,function(c){e.debug("SocketService:response",a,c),c?b.resolve(c):b.reject(c)}),b.promise}angular.module("mustaskeClientApp").service("SocketService",["$log","$q","Socket","RoomService",a]);var c,d,e,f,g;a.prototype.joinRoom=function(a){return e.debug("SocketService#joinRoom:roomId:",a),d.emit(c.events.JOIN_ROOM,a),b(c.events.JOIN_ROOM)},a.prototype.createRoom=function(a){return e.debug("SocketService#createRoom:roomName:",a),d.emit(c.events.CREATE_ROOM,a),b(c.events.CREATE_ROOM)},a.prototype.newQuestion=function(a){e.debug("SocketService#newQuestion:question:",a),d.emit(c.events.NEW_QUESTION,a)},a.prototype.upVoteQuestion=function(a){var b=g.getRoomId();e.debug("SocketService#upVoteQuestion:questionId:",a,b),d.emit(c.events.UP_VOTE_QUESTION,{room_id:b,question_id:a})},a.prototype.downVoteQuestion=function(a){var b=g.getRoomId();e.debug("SocketService#upVoteQuestion:questionId:",a,b),d.emit(c.events.DOWN_VOTE_QUESTION,{room_id:b,question_id:a})},a.prototype.dismissQuestion=function(){},a.prototype.warnUser=function(){},a.prototype.newPoll=function(){},a.prototype.closePoll=function(){},a.prototype.io=function(){return d},a.prototype.deleteRoom=function(a){return e.debug("SocketService#deleteRoom:roomId:",a),d.emit("leave room",a),b("Goodbye")}}(),function(){"use strict";function a(a,e){b=this,c=a,d=e}angular.module("mustaskeClientApp").service("SettingsService",["SocketService","UserService",a]);var b,c,d}(),function(){"use strict";function a(a){d=a,b=this,c={},e={},b.types={AUDIENCE:"audience",OWNER:"owner"},c.type=b.types.AUDIENCE}angular.module("mustaskeClientApp").service("UserService",["$log",a]);var b,c,d,e;a.prototype.setRoomData=function(a){angular.extend(e,a)},a.prototype.setUser=function(a){c=a},a.prototype.setUserType=function(a){c.type=a},a.prototype.setUserId=function(a){c.id=a},a.prototype.getType=function(){return c.type},a.prototype.isRoomOwner=function(){return"owner"===c.type},a.prototype.getUserId=function(){return c.id},a.prototype.getRoomName=function(){return e?e.room_name:void 0},a.prototype.getRoomId=function(){return e?e.room_id:void 0}}(),function(){"use strict";function a(a){c=a,d=this,b={room_name:"",room_id:"",questions:[],top_questions:[]}}angular.module("mustaskeClientApp").service("RoomService",["$log",a]);var b,c,d;a.prototype.setRoomData=function(a){b.room_name=a.room_name,b.room_id=a.room_id,a.questions&&a.questions.length>0&&b.questions.push.apply(b.questions,a.questions),a.top_questions&&a.top_questions.length>0&&b.top_questions.push.apply(b.top_questions,a.top_questions)},a.prototype.addQuestion=function(a){b.questions.unshift(a)},a.prototype.getTopQuestions=function(){return b.questions},a.prototype.getQuestions=function(){return b.questions},a.prototype.getRoomId=function(){return b.room_id},a.prototype.getRoomName=function(){return b.room_name},a.prototype.updateVote=function(a){angular.forEach(b.questions,function(b){b.question_id===a.question_id&&(b.question_score=a.question_score)})}}(),function(){"use strict";function a(a,c){b=a;var d=io.connect();return b.debug("check 1",d.connected),d.on("connect",function(){b.debug("check 2",d.connected)}),c({ioSocket:d})}angular.module("mustaskeClientApp").factory("Socket",["$log","socketFactory",a]);var b}(),function(){"use strict";function a(a,b,c,d,e){k=b,j=d,i=c,l=e,h=a,g=this,g.showRoom=!1,g.overlayHide=!1,g.roomName=""}function b(a){h.debug("Failed to join room: ",a)}function c(a){i.setRoomData(a),l.setRoomData(a),h.debug(i.getType()),h.debug(i.getRoomName()),k.roomName=i.getRoomName(),g.overlayHide=!0}function d(a){h.debug("Failed to join room: ",a)}function e(a){i.setRoomData(a),l.setRoomData(a),i.setUserType("owner"),h.debug(i.getType()),h.debug(i.getRoomName()),k.roomName=l.getRoomName(),k.roomId=l.getRoomId(),g.overlayHide=!0}var f=angular.module("mustaskeClientApp");f.controller("OverlayController",["$log","$rootScope","UserService","SocketService","RoomService",a]);var g,h,i,j,k,l;a.prototype.joinRoom=function(){j.joinRoom(g.roomName).then(c,b)},a.prototype.createRoom=function(){j.createRoom(g.roomName).then(e,d)},a.prototype.toggleAlias=function(){g.showRoom=!g.showRoom}}(),function(){"use strict";function a(a,c,h,i,j,k){e=h,f=j,g=k,d=this,d.selectedIndex=0,d.isFabOpen=!1,d.pages=[{label:"Recent Questions",url:"/recent-questions",icon:"fa fa-question-circle"},{label:"Top Questions",url:"/top-questions",icon:"fa fa-star"},{label:"Polls",url:"/polls",icon:"fa fa-bar-chart"},{label:"Settings",url:"/settings",icon:"fa fa-cog"}],a.$watch("appCtrl.selectedIndex",function(a){e.debug("Current: ",a),e.debug("Changed location too",d.pages[a].url),i(function(){c.url(d.pages[a].url)})}),b()}function b(){f.io().on(f.events.NEW_QUESTION,function(a){g.addQuestion(a)}),f.io().on(f.events.UP_VOTE_QUESTION,function(a){g.updateVote(a)}),f.io().on(f.events.DOWN_VOTE_QUESTION,function(a){g.updateVote(a)})}var c=angular.module("mustaskeClientApp");c.controller("AppController",["$scope","$location","$log","$timeout","SocketService","RoomService",a]);var d,e,f,g}(),function(){"use strict";function a(a,e){d=a,b=this,b.topIndex=0,c=e,b.questions=c.getQuestions(),d.debug("Questions: ",b.questions)}angular.module("mustaskeClientApp").controller("RecentQuestionsController",["$log","RoomService",a]);var b,c,d}(),function(){"use strict";function a(a,f,g){e=a,d=g,c=f,b=this,b.topIndex=0,b.topQuestions=d.getTopQuestions(),e.debug("Top Questions: ",b.topQuestions)}angular.module("mustaskeClientApp").controller("TopQuestionsController",["$log","SocketService","RoomService",a]);var b,c,d,e}(),function(){"use strict";function a(a,g,h,i){b=this,e=a,f=i,c=h,d=g,b.newQuestion=""}angular.module("mustaskeClientApp").controller("QuestionInputController",["$log","$mdBottomSheet","SocketService","RoomService",a]);var b,c,d,e,f;a.prototype.submitQuestion=function(a){var e={room_id:f.getRoomId(),question_text:b.newQuestion};c.newQuestion(e),d.hide(b.newQuestion),a&&a.preventDefault()}}(),function(){"use strict";function a(a,h,i,j){g=a,d=h,e=i,f=j,b=this,b.roomId=d.getRoomId(),c=e.isRoomOwner(),b.message=c?"Delete Room":"Leave Room"}angular.module("mustaskeClientApp").controller("SettingsController",["$log","RoomService","UserService","SocketService",a]);var b,c,d,e,f,g;a.prototype.removeRoom=function(){f.deleteRoom(b.roomId)}}();